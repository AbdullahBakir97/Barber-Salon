{% extends "base.html" %}
{% load static %}
{% block css %}
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/fontawesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock css %}

{% block body %}
      
<section class="hero-wrap js-fullheight" style="background-image: url('{% static 'images/6.jpg' %}');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight justify-content-center align-items-center">
            <div class="col-lg-12 ftco-animate d-flex align-items-center">
                <div class="text text-center">
                    <span class="subheading">Willkommen bei {{ owner.name }}</span>
                    <h1 class="mb-4">Wir sind professionelle Haarpflege</h1>
                    <p><a href="#appointments" class="btn btn-primary btn-outline-primary px-4 py-2">Jetzt buchen</a></p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="ftco-section ftco-no-pt ftco-no-pb">
    <div class="container-fluid px-0">
        <div class="row no-gutters">
            <div class="col-md text-center d-flex align-items-stretch">
                <div class="services-wrap d-flex align-items-center img" style="background-image: url('{% static 'images/4.jpg' %}');">
                    <div class="text">
                        <h3>Für Männer</h3>
                        <p><a href="#price" class="btn-custom">Preise anzeigen <span class="ion-ios-arrow-round-forward"></span></a></p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 text-center d-flex align-items-stretch">
                <div class="text-about py-5 px-4">
                    <h1 class="logo">
                        <a href="#"><span class="flaticon-scissors-in-a-hair-salon-badge"></span>Haircare</a>
                    </h1>
                    <h2>Willkommen in unserem Salon</h2>
                    <p>Ein kleiner Fluss namens Duden fließt an ihrem Platz vorbei und versorgt ihn mit der nötigen Regelialia. Es ist ein paradisisches Land, in dem geröstete Teile von Sätzen in deinen Mund fliegen. Weit weit weg, hinter den Wortbergen, fern von den Ländern Vokalien und Konsonantien, leben die Blindtexte.</p>
                    <p class="mt-3"><a href="#service" class="btn btn-primary btn-outline-primary">Mehr lesen</a></p>
                </div>
            </div>

        </div>
    </div>
</section>

<section id=service class="services-section ftco-section">
    <div class="container">
        <div class="row justify-content-center pb-3">
            <div class="col-md-10 heading-section text-center ftco-animate">
                <span class="subheading">Dienstleistungen</span>
                <h2 class="mb-4">Dienstleistungen Menü</h2>
                <p>Weit weit weg, hinter den Wortbergen, fern von den Ländern Vokalien und Konsonantien</p>
            </div>
        </div>
        <div class="row no-gutters d-flex">
            <div class="col-md-6 col-lg-4 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services d-block text-center">
                    <div class="icon"><span class="flaticon-male-hair-of-head-and-face-shapes"></span></div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Haarschnitt &amp; Styling</h3>
                        <p>Ein kleiner Fluss namens Duden fließt an ihrem Platz vorbei und versorgt.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-4 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services d-block text-center">
                    <div class="icon"><span class="flaticon-beard"></span></div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Bart</h3>
                        <p>Ein kleiner Fluss namens Duden fließt an ihrem Platz vorbei und versorgt.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-4 d-flex align-self-stretch ftco-animate">
                <div class="media block-6 services d-block text-center">
                    <div class="icon"><span class="flaticon-healthy-lifestyle-logo"></span></div>
                    <div class="media-body">
                        <h3 class="heading mb-3">Körperbehandlung</h3>
                        <p>Ein kleiner Fluss namens Duden fließt an ihrem Platz vorbei und versorgt.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="appointments" class="ftco-section ftco-booking bg-light">
    <div class="container ftco-relative">
        <div class="row justify-content-center pb-3">
            <div class="col-md-10 heading-section text-center ftco-animate">
                <span class="subheading">Buchung</span>
                <h2 class="mb-4">Vereinbaren Sie einen Termin</h2>
                <p>Weit weit weg, hinter den Wortbergen, fern von den Ländern Vokalien und Konsonantien</p>
            </div>
        </div>
        <h3 class="vr">Rufen Sie uns an: {{owner.phone}}</h3>
        <div class="row justify-content-center">
            <div class="col-md-8 ftco-animate">
                <form method="POST" class="appointment-form" action="{% url 'contact:visitor_appointment_create' %}">
                    {% csrf_token %}
                    {% if form.errors and view.submitted %}
                        {% for field in form %}
                            {% for error in field.errors %}
                                <div class="alert alert-danger" role="alert">
                                    {{ error }}
                                </div>
                            {% endfor %}
                        {% endfor %}
                    {% endif %}
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_name">Ihr Name</label>
                                {{ form.name }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_email">Ihre E-Mail</label>
                                {{ form.email }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_date">Bevorzugtes Datum</label>
                                {{ form.date }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_time">Bevorzugte Zeit</label>
                                {{ form.time }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_barber">Friseur auswählen</label>
                                {{ form.barber }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="id_service_type">Dienstleistungsart</label>
                                <div class="select-wrap">
                                    <div class="icon">
                                        <span class="fas fa-chevron-down"></span>
                                    </div>
                                    {{ form.service_type }}
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="id_phone">Ihr Telefon</label>
                                {{ form.phone }}
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="id_message">Zusätzliche Nachricht</label>
                                {{ form.message }}
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Termin vereinbaren</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<section id=barber class="ftco-section ftco-team">
    <div class="container-fluid px-md-5">
        <div class="row justify-content-center pb-3">
            <div class="col-md-10 heading-section text-center ftco-animate">
                <span class="subheading">Künstlerischer Leiter</span>
                <h2 class="mb-4">Friseur</h2>
                <p>Weit weit weg, hinter den Wortbergen, fern von den Ländern Vokalien und Konsonantien</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 ftco-animate">
                <div class="carousel-team owl-carousel">
                    {% for barber in barbers %}
                        <div class="item">
                            <a href="#" class="team text-center">
                                <div class="img" style="background-image: url({{ barber.image.url }});"></div>
                                <h2>{{ barber.name }}</h2>
                                <span class="position">{{ barber.expertise }}</span>
                                <!-- Durchschnittliche Bewertung mit Sternen anzeigen -->
                                <div class="star-rating">
                                    {% for _ in "12345" %}
                                        {% if forloop.counter <= barber.avg_rate %}
                                            <span>&#9733;</span>
                                        {% else %}
                                            <span>&#9734;</span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <p class="avg-rating">{{ barber.avg_rate }}</p>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
<style>
    .star-rating span { font-size: 20px; color: #ffca48; }
</style>

<section id=gallery class="ftco-section ftco-no-pt ftco-no-pb gallery-container">
    <div class="container-fluid my-5">
        <div class="row no-gutters justify-content-center mb-5 pb-2">
            <div class="col-md-6 text-center heading-section ftco-animate">
                <span class="subheading">Galerie</span>
                <h2 class="mb-4">Unsere Galerie</h2>
                <p>Getrennt leben sie in. Ein kleiner Fluss namens Duden fließt an ihrem Platz vorbei und versorgt ihn mit der nötigen Regelialia.</p>
            </div>
        </div>
        <div class="row no-gutters">
            {% for gallery_item in gallery_items %}
            <div class="col-md-6 col-lg-3 ftco-animate gallery-item">
                <div class="project">
                    <img src="{{ gallery_item.image.url }}" class="img-fluid fixed-size-img" alt="{{ gallery_item.title }}">

                    <div class="text">
                        <span>{{ gallery_item.category }}</span>
                        <h3><a href="{{ gallery_item.get_absolute_url }}">{{ gallery_item.name }}</a></h3>
                        <p>{{ gallery_item.description }}</p>
                        
                    </div>

                    <a href="{{ gallery_item.image.url }}" class="icon image-popup d-flex justify-content-center align-items-center">
                        <span class="icon-expand"></span>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<style>
    .fixed-size-img {
        height: 500px; 
        width: 500px;
        object-fit: fill;
    }
</style>

<section id=price class="ftco-section ftco-pricing">
    <div class="container">
        <div class="row justify-content-center pb-3">
            <div class="col-md-10 heading-section text-center ftco-animate">
                <span class="subheading">Preise</span>
                <h2 class="mb-4">Unsere Preise</h2>
                <p>Weit weit weg, hinter den Wortbergen, fern von den Ländern Vokalien und Konsonantien</p>
            </div>
        </div>
        <div class="row">
            {% for category in categories %}
                <div class="col-md-4 ftco-animate">
                    <div class="pricing-entry pb-5 text-center">
                        <div>
                            <h3 class="mb-4">{{ category.name }}</h3>
                        </div>
                        <ul>
                            {% for service in category.service_category.all %}
                                <li>
                                    <p><span class="price">{{ service.name }}</span> <span class="per">/€{{ service.price }}</span></p>
                                </li>
                            {% endfor %}
                        </ul>
                        <p class="button text-center"><a href="{% url 'contact:visitor_appointment_create' %}" class="btn btn-primary px-4 py-3">Angebot erhalten</a></p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

  
{% endblock body %}